{"ast":null,"code":"import { Email } from '../../../../config';\nimport { Sweetalert } from '../../../../functions';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services/orders.service\";\nimport * as i2 from \"../../../../services/sales.service\";\nimport * as i3 from \"@angular/common/http\";\nfunction AccountOrdersComponent_tr_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 25);\n    i0.ɵɵtext(2, \"You haven't orders!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AccountOrdersComponent_tr_44_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function AccountOrdersComponent_tr_44_div_3_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const i_r2 = i0.ɵɵnextContext().index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.nextProcess(ctx_r2.idOrders[i_r2], i_r2));\n    });\n    i0.ɵɵtext(2, \"Next Process\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AccountOrdersComponent_tr_44_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const order_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", order_r4.status, \" \");\n  }\n}\nfunction AccountOrdersComponent_tr_44_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const order_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", order_r4.status, \" \");\n  }\n}\nfunction AccountOrdersComponent_tr_44_li_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 37)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 38);\n    i0.ɵɵtext(5, \"Reviewed \");\n    i0.ɵɵelement(6, \"i\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 2, ctx_r2.process[i_r2][0].date));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Comment: \", ctx_r2.process[i_r2][0].comment, \"\");\n  }\n}\nfunction AccountOrdersComponent_tr_44_li_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 37)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 38);\n    i0.ɵɵtext(5, \"Sent \");\n    i0.ɵɵelement(6, \"i\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 2, ctx_r2.process[i_r2][1].date));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Comment: \", ctx_r2.process[i_r2][1].comment, \"\");\n  }\n}\nfunction AccountOrdersComponent_tr_44_li_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 40)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Sent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 41);\n    i0.ɵɵelement(7, \"span\", 42);\n    i0.ɵɵtext(8, \" In process \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, ctx_r2.process[i_r2][1].date));\n  }\n}\nfunction AccountOrdersComponent_tr_44_li_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 37)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 38);\n    i0.ɵɵtext(5, \"Delivered \");\n    i0.ɵɵelement(6, \"i\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 2, ctx_r2.process[i_r2][1].date));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Comment: \", ctx_r2.process[i_r2][2].comment, \"\");\n  }\n}\nfunction AccountOrdersComponent_tr_44_li_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 40)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Delivered\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 41);\n    i0.ɵɵelement(7, \"span\", 42);\n    i0.ɵɵtext(8, \" In process \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, ctx_r2.process[i_r2][2].date));\n  }\n}\nfunction AccountOrdersComponent_tr_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵtemplate(3, AccountOrdersComponent_tr_44_div_3_Template, 3, 0, \"div\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtemplate(5, AccountOrdersComponent_tr_44_span_5_Template, 2, 1, \"span\", 27)(6, AccountOrdersComponent_tr_44_span_6_Template, 2, 1, \"span\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵelement(22, \"div\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"td\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"td\")(26, \"ul\", 30);\n    i0.ɵɵtemplate(27, AccountOrdersComponent_tr_44_li_27_Template, 9, 4, \"li\", 31)(28, AccountOrdersComponent_tr_44_li_28_Template, 9, 4, \"li\", 31)(29, AccountOrdersComponent_tr_44_li_29_Template, 9, 3, \"li\", 32)(30, AccountOrdersComponent_tr_44_li_30_Template, 9, 4, \"li\", 31)(31, AccountOrdersComponent_tr_44_li_31_Template, 9, 3, \"li\", 32);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const order_r4 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.idOrders[i_r2], \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", order_r4.status == \"pending\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", order_r4.status == \"pending\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", order_r4.status == \"delivered\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", order_r4.email, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", order_r4.country, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", order_r4.city, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", order_r4.address, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", order_r4.phone, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", order_r4.product, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", order_r4.quantity, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", order_r4.details, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" $\", order_r4.price, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.process[i_r2][0].stage == \"reviewed\" && ctx_r2.process[i_r2][0].status == \"ok\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.process[i_r2][1].stage == \"sent\" && ctx_r2.process[i_r2][1].status == \"ok\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.process[i_r2][1].stage == \"sent\" && ctx_r2.process[i_r2][1].status != \"ok\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.process[i_r2][2].stage == \"delivered\" && ctx_r2.process[i_r2][2].status == \"ok\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.process[i_r2][2].stage == \"delivered\" && ctx_r2.process[i_r2][2].status != \"ok\");\n  }\n}\nfunction AccountOrdersComponent_div_56_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53)(1, \"div\", 54);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const nextProcess_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(nextProcess_r5.status);\n  }\n}\nfunction AccountOrdersComponent_div_56_div_17_input_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 61, 1);\n    i0.ɵɵlistener(\"change\", function AccountOrdersComponent_div_56_div_17_input_2_Template_input_change_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const status_r7 = i0.ɵɵreference(1);\n      const i_r8 = i0.ɵɵnextContext(2).index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.changeProcess(\"status\", status_r7, i_r8));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r8 = i0.ɵɵnextContext(2).index;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"status-pending\", i_r8, \"\");\n    i0.ɵɵpropertyInterpolate1(\"name\", \"status\", i_r8, \"\");\n  }\n}\nfunction AccountOrdersComponent_div_56_div_17_input_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 62, 1);\n    i0.ɵɵlistener(\"change\", function AccountOrdersComponent_div_56_div_17_input_3_Template_input_change_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const status_r10 = i0.ɵɵreference(1);\n      const i_r8 = i0.ɵɵnextContext(2).index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.changeProcess(\"status\", status_r10, i_r8));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r8 = i0.ɵɵnextContext(2).index;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"status-pending\", i_r8, \"\");\n    i0.ɵɵpropertyInterpolate1(\"name\", \"status\", i_r8, \"\");\n  }\n}\nfunction AccountOrdersComponent_div_56_div_17_input_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 63, 1);\n    i0.ɵɵlistener(\"change\", function AccountOrdersComponent_div_56_div_17_input_7_Template_input_change_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const status_r12 = i0.ɵɵreference(1);\n      const i_r8 = i0.ɵɵnextContext(2).index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.changeProcess(\"status\", status_r12, i_r8));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r8 = i0.ɵɵnextContext(2).index;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"status-ok\", i_r8, \"\");\n    i0.ɵɵpropertyInterpolate1(\"name\", \"status\", i_r8, \"\");\n  }\n}\nfunction AccountOrdersComponent_div_56_div_17_input_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 64, 1);\n    i0.ɵɵlistener(\"change\", function AccountOrdersComponent_div_56_div_17_input_8_Template_input_change_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const status_r14 = i0.ɵɵreference(1);\n      const i_r8 = i0.ɵɵnextContext(2).index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.changeProcess(\"status\", status_r14, i_r8));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r8 = i0.ɵɵnextContext(2).index;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"status-ok\", i_r8, \"\");\n    i0.ɵɵpropertyInterpolate1(\"name\", \"status\", i_r8, \"\");\n  }\n}\nfunction AccountOrdersComponent_div_56_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53)(1, \"div\", 55);\n    i0.ɵɵtemplate(2, AccountOrdersComponent_div_56_div_17_input_2_Template, 2, 4, \"input\", 56)(3, AccountOrdersComponent_div_56_div_17_input_3_Template, 2, 4, \"input\", 57);\n    i0.ɵɵelementStart(4, \"label\", 58);\n    i0.ɵɵtext(5, \"Pending\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 55);\n    i0.ɵɵtemplate(7, AccountOrdersComponent_div_56_div_17_input_7_Template, 2, 4, \"input\", 59)(8, AccountOrdersComponent_div_56_div_17_input_8_Template, 2, 4, \"input\", 60);\n    i0.ɵɵelementStart(9, \"label\", 58);\n    i0.ɵɵtext(10, \"Ok\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    const nextProcess_r5 = ctx_r14.$implicit;\n    const i_r8 = ctx_r14.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", nextProcess_r5.status == \"pending\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", nextProcess_r5.status == \"ok\");\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"for\", \"status-pending\", i_r8, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", nextProcess_r5.status == \"pending\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", nextProcess_r5.status == \"ok\");\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"for\", \"status-ok\", i_r8, \"\");\n  }\n}\nfunction AccountOrdersComponent_div_56_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 49);\n    i0.ɵɵelement(1, \"textarea\", 65);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const nextProcess_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", nextProcess_r5.comment);\n  }\n}\nfunction AccountOrdersComponent_div_56_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"textarea\", 66, 2);\n    i0.ɵɵlistener(\"change\", function AccountOrdersComponent_div_56_div_23_Template_textarea_change_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const comment_r17 = i0.ɵɵreference(2);\n      const i_r8 = i0.ɵɵnextContext().index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.changeProcess(\"comment\", comment_r17, i_r8));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const nextProcess_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", nextProcess_r5.comment);\n  }\n}\nfunction AccountOrdersComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"div\", 44);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 45)(4, \"div\", 46)(5, \"div\", 47)(6, \"label\", 48);\n    i0.ɵɵtext(7, \"Date:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 49);\n    i0.ɵɵelement(9, \"input\", 50, 0);\n    i0.ɵɵpipe(11, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 46)(13, \"div\", 47)(14, \"label\", 48);\n    i0.ɵɵtext(15, \"Status:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(16, AccountOrdersComponent_div_56_div_16_Template, 3, 1, \"div\", 51)(17, AccountOrdersComponent_div_56_div_17_Template, 11, 8, \"div\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 46)(19, \"div\", 47)(20, \"label\", 48);\n    i0.ɵɵtext(21, \"Comment:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(22, AccountOrdersComponent_div_56_div_22_Template, 2, 1, \"div\", 52)(23, AccountOrdersComponent_div_56_div_23_Template, 3, 1, \"div\", 52);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const nextProcess_r5 = ctx.$implicit;\n    const i_r8 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i_r8 + 1, \". \", nextProcess_r5.stage, \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"value\", i0.ɵɵpipeBind2(11, 7, nextProcess_r5.date, \"yyyy-MM-dd\"));\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", nextProcess_r5.status == \"ok\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", nextProcess_r5.status == \"pending\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", nextProcess_r5.status == \"ok\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", nextProcess_r5.status == \"pending\");\n  }\n}\nexport let AccountOrdersComponent = /*#__PURE__*/(() => {\n  class AccountOrdersComponent {\n    constructor(ordersService, salesService, http) {\n      this.ordersService = ordersService;\n      this.salesService = salesService;\n      this.http = http;\n      this.orders = [];\n      this.idOrders = [];\n      this.process = [];\n      this.editNextProcess = [];\n      this.newNextProcess = [{\n        \"stage\": \"\",\n        \"status\": \"\",\n        \"comment\": \"\",\n        \"date\": \"\"\n      }, {\n        \"stage\": \"\",\n        \"status\": \"\",\n        \"comment\": \"\",\n        \"date\": \"\"\n      }, {\n        \"stage\": \"\",\n        \"status\": \"\",\n        \"comment\": \"\",\n        \"date\": \"\"\n      }];\n      this.email = Email.url;\n      this.dtOptions = {};\n      this.dtTrigger = new Subject();\n    }\n    ngOnInit() {\n      /*=============================================\n      Agregamos opciones a DataTable\n      =============================================*/\n      this.dtOptions = {\n        pagingType: 'full_numbers',\n        processing: true\n      };\n      let load = 0;\n      /*=============================================\n      Preguntamos si esta tienda tiene órdenes\n      =============================================*/\n      this.ordersService.getFilterData(\"store\", this.childItem).subscribe(resp => {\n        if (Object.keys(resp).length > 0) {\n          for (const i in resp) {\n            load++;\n            this.orders.push(resp[i]);\n            this.idOrders.push(i);\n            this.process.push(JSON.parse(resp[i].process));\n          }\n          if (load == this.orders.length) {\n            this.dtTrigger.next();\n          }\n        }\n      });\n    }\n    /*=============================================\n    Editar Proceso\n    =============================================*/\n    nextProcess(idOrder, index) {\n      this.editNextProcess = this.process[index];\n      /*=============================================\n      Abrir la ventana modal\n      =============================================*/\n      $(\"#nextProcess\").modal();\n      /*=============================================\n      Agregar el ID de la orden\n      =============================================*/\n      $(\"#nextProcess .modal-title span\").html(idOrder);\n      $(\"#indexOrder\").val(index);\n      /*=============================================\n      Esconder la edición de entrega si el producto aún no se ha enviado\n      =============================================*/\n      if (this.editNextProcess[1][\"status\"] == \"pending\") {\n        setTimeout(function () {\n          let block = $(\".card-header\");\n          $(block[2]).parent().remove();\n        }, this.editNextProcess.length * 10);\n      }\n    }\n    /*=============================================\n    Recoger información al cambiar el proceso\n    =============================================*/\n    changeProcess(type, item, index) {\n      console.log(\"item\", item.value);\n      this.newNextProcess[index][type] = item.value;\n    }\n    /*=============================================\n    Guardar cambios en el proceso de entrega\n    =============================================*/\n    onSubmitProcess() {\n      let idOrder = $(\"#nextProcess .modal-title span\").html();\n      this.editNextProcess.map((item, index) => {\n        if (this.newNextProcess[index][\"status\"] != \"\") {\n          item[\"status\"] = this.newNextProcess[index][\"status\"];\n        }\n        if (this.newNextProcess[index][\"comment\"] != \"\") {\n          item[\"comment\"] = this.newNextProcess[index][\"comment\"];\n        }\n        if (this.newNextProcess[index][\"date\"] != \"\") {\n          item[\"date\"] = this.newNextProcess[index][\"date\"];\n        }\n        return item;\n      });\n      /*=============================================\n      Preguntamos si es la última parte del proceso\n      =============================================*/\n      let status = \"\";\n      if (this.newNextProcess[2][\"status\"] == \"ok\") {\n        status = \"delivered\";\n        /*=============================================\n        Traemos la venta relacionada a la orden\n        =============================================*/\n        this.salesService.getFilterData(\"id_order\", idOrder).subscribe(resp => {\n          let idSale = Object.keys(resp)[0];\n          let body = {\n            \"status\": \"success\"\n          };\n          /*=============================================\n          Cambiar el estado de la venta\n          =============================================*/\n          this.salesService.patchDataAuth(idSale, body, localStorage.getItem(\"idToken\")).subscribe(resp => {});\n        });\n      } else {\n        status = \"pending\";\n      }\n      /*=============================================\n      Creamos el cuerpo\n      =============================================*/\n      let body = {\n        \"status\": status,\n        \"process\": JSON.stringify(this.editNextProcess)\n      };\n      /*=============================================\n      Editar la orden en la BD\n      =============================================*/\n      this.ordersService.patchDataAuth(idOrder, body, localStorage.getItem(\"idToken\")).subscribe(resp => {\n        /*=============================================\n        Enviar notificación por correo electrónico\n        =============================================*/\n        const formData = new FormData();\n        formData.append('email', 'yes');\n        formData.append('comment', 'You have received an update on your order delivery process');\n        formData.append('url', 'account/my-shopping');\n        formData.append('address', this.orders[$(\"#indexOrder\").val()].email);\n        formData.append('name', this.orders[$(\"#indexOrder\").val()].user);\n        this.http.post(this.email, formData).subscribe(resp => {\n          if (resp[\"status\"] == 200) {\n            Sweetalert.fnc(\"success\", \"The order was successfully updated\", \"/account/orders\");\n          } else {\n            Sweetalert.fnc(\"error\", \"Failed to send email notification\", null);\n          }\n        });\n      }, err => {\n        Sweetalert.fnc(\"error\", err.error.error.message, null);\n      });\n    }\n    /*=============================================\n    Destruímos el trigger de angular\n    =============================================*/\n    ngOnDestroy() {\n      this.dtTrigger.unsubscribe();\n    }\n    static {\n      this.ɵfac = function AccountOrdersComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AccountOrdersComponent)(i0.ɵɵdirectiveInject(i1.OrdersService), i0.ɵɵdirectiveInject(i2.SalesService), i0.ɵɵdirectiveInject(i3.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AccountOrdersComponent,\n        selectors: [[\"app-account-orders\"]],\n        inputs: {\n          childItem: \"childItem\"\n        },\n        decls: 61,\n        vars: 5,\n        consts: [[\"date\", \"\"], [\"status\", \"\"], [\"comment\", \"\"], [1, \"ps-section__content\"], [1, \"ps-section__links\"], [\"href\", \"/account\"], [\"href\", \"/account/my-shopping\"], [\"href\", \"/account/my-store\"], [\"href\", \"account/my-sales\"], [1, \"table-responsive\", \"mt-4\"], [\"datatable\", \"\", \"width\", \"100%\", 1, \"table\", \"ps-table--whishlist\", \"dt-responsive\", 3, \"dtOptions\", \"dtTrigger\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"nextProcess\", 1, \"modal\"], [1, \"modal-dialog\", \"modal-lg\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"close\"], [1, \"modal-body\"], [\"type\", \"hidden\", \"id\", \"indexOrder\"], [\"class\", \"card my-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"modal-footer\"], [1, \"form-group\", \"submtit\"], [1, \"ps-btn\", \"ps-btn--fullwidth\", 3, \"click\"], [\"colspan\", \"12\", 1, \"text-center\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"badge badge-danger p-3\", 4, \"ngIf\"], [\"class\", \"badge badge-success p-3\", 4, \"ngIf\"], [3, \"innerHTML\"], [1, \"timeline\"], [\"class\", \"success\", 4, \"ngIf\"], [\"class\", \"process\", 4, \"ngIf\"], [1, \"text-center\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\", \"mt-2\", 3, \"click\"], [1, \"badge\", \"badge-danger\", \"p-3\"], [1, \"badge\", \"badge-success\", \"p-3\"], [1, \"success\"], [1, \"text-success\"], [1, \"fas\", \"fa-check\"], [1, \"process\"], [\"disabled\", \"\", 1, \"btn\", \"btn-primary\"], [1, \"spinner-border\", \"spinner-border-sm\"], [1, \"card\", \"my-3\"], [1, \"card-header\", \"text-uppercase\"], [1, \"card-body\"], [1, \"form-row\"], [1, \"col-2\", \"text-right\"], [1, \"p-3\", \"lead\"], [1, \"col-10\"], [\"type\", \"date\", \"name\", \"date\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"class\", \"col-10 mt-3\", 4, \"ngIf\"], [\"class\", \"col-10\", 4, \"ngIf\"], [1, \"col-10\", \"mt-3\"], [1, \"text-uppercase\"], [1, \"custom-control\", \"custom-radio\", \"custom-control-inline\"], [\"type\", \"radio\", \"class\", \"custom-control-input\", \"value\", \"pending\", \"checked\", \"\", 3, \"id\", \"name\", \"change\", 4, \"ngIf\"], [\"type\", \"radio\", \"class\", \"custom-control-input\", \"value\", \"pending\", 3, \"id\", \"name\", \"change\", 4, \"ngIf\"], [1, \"custom-control-label\", 3, \"for\"], [\"type\", \"radio\", \"class\", \"custom-control-input\", \"value\", \"ok\", 3, \"id\", \"name\", \"change\", 4, \"ngIf\"], [\"type\", \"radio\", \"class\", \"custom-control-input\", \"value\", \"ok\", \"checked\", \"\", 3, \"id\", \"name\", \"change\", 4, \"ngIf\"], [\"type\", \"radio\", \"value\", \"pending\", \"checked\", \"\", 1, \"custom-control-input\", 3, \"change\", \"id\", \"name\"], [\"type\", \"radio\", \"value\", \"pending\", 1, \"custom-control-input\", 3, \"change\", \"id\", \"name\"], [\"type\", \"radio\", \"value\", \"ok\", 1, \"custom-control-input\", 3, \"change\", \"id\", \"name\"], [\"type\", \"radio\", \"value\", \"ok\", \"checked\", \"\", 1, \"custom-control-input\", 3, \"change\", \"id\", \"name\"], [\"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [1, \"form-control\", 3, \"change\", \"value\"]],\n        template: function AccountOrdersComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 3)(1, \"ul\", 4)(2, \"li\")(3, \"a\", 5);\n            i0.ɵɵtext(4, \"My Wishlist\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(5, \"li\")(6, \"a\", 6);\n            i0.ɵɵtext(7, \"My Shopping\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"li\")(9, \"a\", 7);\n            i0.ɵɵtext(10, \"My Store\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"li\")(12, \"a\", 8);\n            i0.ɵɵtext(13, \"My Sales\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(14, \"div\", 9)(15, \"table\", 10)(16, \"thead\")(17, \"tr\")(18, \"th\");\n            i0.ɵɵtext(19, \"Order Id\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"th\");\n            i0.ɵɵtext(21, \"Status\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"th\");\n            i0.ɵɵtext(23, \"Client\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"th\");\n            i0.ɵɵtext(25, \"Country\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"th\");\n            i0.ɵɵtext(27, \"City\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"th\");\n            i0.ɵɵtext(29, \"Address\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"th\");\n            i0.ɵɵtext(31, \"Phone\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"th\");\n            i0.ɵɵtext(33, \"Product\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"th\");\n            i0.ɵɵtext(35, \"Quantity\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"th\");\n            i0.ɵɵtext(37, \"Details\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(38, \"th\");\n            i0.ɵɵtext(39, \"Price\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(40, \"th\");\n            i0.ɵɵtext(41, \"Process\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(42, \"tbody\");\n            i0.ɵɵtemplate(43, AccountOrdersComponent_tr_43_Template, 3, 0, \"tr\", 11)(44, AccountOrdersComponent_tr_44_Template, 32, 18, \"tr\", 12);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(45, \"div\", 13)(46, \"div\", 14)(47, \"div\", 15)(48, \"div\", 16)(49, \"h4\", 17);\n            i0.ɵɵtext(50, \"Next Process for \");\n            i0.ɵɵelement(51, \"span\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(52, \"button\", 18);\n            i0.ɵɵtext(53, \"\\u00D7\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(54, \"div\", 19);\n            i0.ɵɵelement(55, \"input\", 20);\n            i0.ɵɵtemplate(56, AccountOrdersComponent_div_56_Template, 24, 10, \"div\", 21);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(57, \"div\", 22)(58, \"div\", 23)(59, \"button\", 24);\n            i0.ɵɵlistener(\"click\", function AccountOrdersComponent_Template_button_click_59_listener() {\n              return ctx.onSubmitProcess();\n            });\n            i0.ɵɵtext(60, \"Save\");\n            i0.ɵɵelementEnd()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(15);\n            i0.ɵɵproperty(\"dtOptions\", ctx.dtOptions)(\"dtTrigger\", ctx.dtTrigger);\n            i0.ɵɵadvance(28);\n            i0.ɵɵproperty(\"ngIf\", ctx.orders.length == 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.orders);\n            i0.ɵɵadvance(12);\n            i0.ɵɵproperty(\"ngForOf\", ctx.editNextProcess);\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return AccountOrdersComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}