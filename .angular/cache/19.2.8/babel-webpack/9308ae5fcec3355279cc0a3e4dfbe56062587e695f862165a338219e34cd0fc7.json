{"ast":null,"code":"import { Path } from '../../config';\nimport { Select2Cofig, Pagination } from '../../functions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/stores.service\";\nimport * as i2 from \"@angular/router\";\nfunction StoreListComponent_select_24_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"value\", ctx_r4.sortValues[i_r4]);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r3);\n  }\n}\nfunction StoreListComponent_select_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"select\", 20);\n    i0.ɵɵtemplate(1, StoreListComponent_select_24_option_1_Template, 2, 2, \"option\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.sortItems);\n  }\n}\nfunction StoreListComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"h3\");\n    i0.ɵɵtext(2, \"No stores found\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction StoreListComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"article\", 25);\n    i0.ɵɵelement(2, \"div\", 26);\n    i0.ɵɵelementStart(3, \"div\", 27)(4, \"div\", 28)(5, \"a\", 29);\n    i0.ɵɵelement(6, \"img\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"a\", 31);\n    i0.ɵɵtext(8, \"Visit Store\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"h4\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"ul\", 32)(14, \"li\");\n    i0.ɵɵelement(15, \"i\", 33);\n    i0.ɵɵelementStart(16, \"a\", 34);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"li\");\n    i0.ɵɵelement(19, \"i\", 35);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const store_r6 = ctx.$implicit;\n    const lastIndex_r7 = ctx.last;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMapInterpolate3(\"background: url(\", ctx_r4.path, \"img/stores/\", store_r6.url, \"/\", store_r6.cover, \");\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/search/\", store_r6.store, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate3(\"src\", \"\", ctx_r4.path, \"img/stores/\", store_r6.url, \"/\", store_r6.logo, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/search/\", store_r6.store, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(store_r6.store);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(store_r6.address);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"mailto:\", store_r6.email, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(store_r6.email);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", store_r6.phone, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", lastIndex_r7 ? ctx_r4.callback() : \"\", \" \");\n  }\n}\nexport let StoreListComponent = /*#__PURE__*/(() => {\n  class StoreListComponent {\n    constructor(storesService, activatedRoute) {\n      this.storesService = storesService;\n      this.activatedRoute = activatedRoute;\n      this.path = Path.url;\n      this.stores = [];\n      this.storeFound = 0;\n      this.totalPage = 0;\n      this.page = 1;\n      this.param1 = null;\n      this.param2 = null;\n      this.render = true;\n      this.sortItems = [];\n      this.sortValues = [];\n      this.currentRoute = \"store-list\";\n    }\n    ngOnInit() {\n      /*=============================================\n      Capturamos el parámetro URL\n      =============================================*/\n      if (this.activatedRoute.snapshot.params[\"param\"] != undefined) {\n        this.param1 = this.activatedRoute.snapshot.params[\"param\"].split(\"&\")[0];\n        this.param2 = this.activatedRoute.snapshot.params[\"param\"].split(\"&\")[1];\n      }\n      if (Number(this.param1)) {\n        this.page = this.param1;\n        this.currentRoute = `store-list/${this.page}`;\n      }\n      /*=============================================\n      Traemos todas las tiendas del marketplace\n      =============================================*/\n      this.storesService.getData().subscribe(resp => {\n        this.storeFnc(resp);\n      });\n    }\n    /*=============================================\n    Declaramos función para mostrar el catálogo de tiendas\n    =============================================*/\n    storeFnc(response) {\n      this.stores = [];\n      let getStores = [];\n      /*=============================================\n      Hacemos un recorrido por la respuesta que nos traiga el filtrado\n      =============================================*/\n      for (const i in response) {\n        getStores.push(response[i]);\n      }\n      /*=============================================\n      Filtramos de acuerdo a la búsqueda\n      =============================================*/\n      if (this.param2 != null) {\n        getStores = getStores.filter(value => !value.store.search(this.param2));\n      }\n      /*=============================================\n      Filtramos de acuerdo al orden\n      =============================================*/\n      if (this.param1 == null) {\n        getStores.sort((a, b) => {\n          return new Date(b.date).getTime() - new Date(a.date).getTime();\n        });\n        this.sortItems = [\"Sort by Newest: old to news\", \"Sort by Oldest: New to old\"];\n        this.sortValues = [\"first\", \"latest\"];\n      }\n      if (this.param1 != null && this.param1 == \"latest\") {\n        getStores.sort((a, b) => {\n          return new Date(a.date).getTime() - new Date(b.date).getTime();\n        });\n        this.sortItems = [\"Sort by Oldest: New to old\", \"Sort by Newest: old to news\"];\n        this.sortValues = [\"latest\", \"first\"];\n      }\n      if (this.param1 != null && this.param1 == \"first\") {\n        getStores.sort((a, b) => {\n          return new Date(b.date).getTime() - new Date(a.date).getTime();\n        });\n        this.sortItems = [\"Sort by Oldest: New to old\", \"Sort by Newest: New to old\"];\n        this.sortValues = [\"first\", \"latest\"];\n      }\n      /*=============================================\n      Definimos el total de tiendas y la paginación de tiendas\n      =============================================*/\n      this.storeFound = getStores.length;\n      this.totalPage = Math.ceil(Number(this.storeFound) / 9);\n      /*=============================================\n      Filtramos solo hasta 9 tiendas\n      =============================================*/\n      getStores.forEach((product, index) => {\n        /*=============================================\n        Configuramos la paginación desde - hasta\n        =============================================*/\n        let first = Number(index) + this.page * 9 - 9;\n        let last = 9 * this.page;\n        /*=============================================\n        Filtramos los productos a mostrar\n        =============================================*/\n        if (first < last) {\n          if (getStores[first] != undefined) {\n            this.stores.push(getStores[index]);\n          }\n        }\n      });\n    }\n    /*=============================================\n    Función para el buscador de tiendas\n    =============================================*/\n    searchStore(search) {\n      window.open(`store-list/search&${search.value}`, '_top');\n    }\n    /*=============================================\n    Función que nos avisa cuando finaliza el renderizado de Angular\n    =============================================*/\n    callback() {\n      if (this.render) {\n        this.render = false;\n        Select2Cofig.fnc();\n        Pagination.fnc();\n        $(\".sortItems\").change(function () {\n          window.open(`store-list/${$(this).val()}`, '_top');\n        });\n      }\n    }\n    static {\n      this.ɵfac = function StoreListComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || StoreListComponent)(i0.ɵɵdirectiveInject(i1.StoresService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: StoreListComponent,\n        selectors: [[\"app-store-list\"]],\n        decls: 31,\n        vars: 8,\n        consts: [[\"search\", \"\"], [1, \"ps-breadcrumb\"], [1, \"container\"], [1, \"breadcrumb\"], [\"routerLink\", \"/\"], [1, \"ps-store-list\"], [1, \"ps-section__header\"], [1, \"ps-section__wrapper\"], [1, \"ps-section__center\"], [1, \"ps-store-box\"], [\"action\", \"/action\", 1, \"form-inline\"], [\"for\", \"search pr-3\"], [\"type\", \"search\", \"id\", \"search\", \"placeholder\", \"Input here...\", 1, \"ml-3\", 3, \"change\"], [\"class\", \"ps-select sortItems\", 4, \"ngIf\"], [1, \"ps-section__content\"], [1, \"row\"], [\"class\", \"col-12 text-center\", 4, \"ngIf\"], [\"class\", \"col-lg-4 col-md-6 col-12\", 4, \"ngFor\", \"ngForOf\"], [1, \"ps-pagination\"], [1, \"pagination\"], [1, \"ps-select\", \"sortItems\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"col-12\", \"text-center\"], [1, \"col-lg-4\", \"col-md-6\", \"col-12\"], [1, \"ps-block--store\"], [1, \"ps-block__thumbnail\", \"bg--cover\"], [1, \"ps-block__content\"], [1, \"ps-block__author\"], [1, \"ps-block__user\", 3, \"routerLink\"], [\"alt\", \"\", 3, \"src\"], [1, \"ps-btn\", 3, \"routerLink\"], [1, \"ps-block__contact\"], [1, \"icon-envelope\"], [3, \"href\"], [1, \"icon-telephone\"]],\n        template: function StoreListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"ul\", 3)(3, \"li\")(4, \"a\", 4);\n            i0.ɵɵtext(5, \"Home\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"li\");\n            i0.ɵɵtext(7, \"Store List\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(8, \"section\", 5)(9, \"div\", 2)(10, \"div\", 6)(11, \"h3\");\n            i0.ɵɵtext(12, \"Store list\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"div\", 7)(14, \"div\", 8)(15, \"section\", 9)(16, \"div\", 6)(17, \"p\");\n            i0.ɵɵtext(18);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"form\", 10)(20, \"label\", 11);\n            i0.ɵɵtext(21, \"Search: \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"input\", 12, 0);\n            i0.ɵɵlistener(\"change\", function StoreListComponent_Template_input_change_22_listener() {\n              i0.ɵɵrestoreView(_r1);\n              const search_r2 = i0.ɵɵreference(23);\n              return i0.ɵɵresetView(ctx.searchStore(search_r2));\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(24, StoreListComponent_select_24_Template, 2, 1, \"select\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"div\", 14)(26, \"div\", 15);\n            i0.ɵɵtemplate(27, StoreListComponent_div_27_Template, 3, 0, \"div\", 16)(28, StoreListComponent_div_28_Template, 22, 20, \"div\", 17);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"div\", 18);\n            i0.ɵɵelement(30, \"ul\", 19);\n            i0.ɵɵelementEnd()()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(18);\n            i0.ɵɵtextInterpolate2(\"Showing \", ctx.stores.length, \" of \", ctx.storeFound, \" results\");\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.sortItems.length > 0);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.stores.length == 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.stores);\n            i0.ɵɵadvance(2);\n            i0.ɵɵattribute(\"data-total-pages\", ctx.totalPage)(\"data-actual-page\", ctx.page)(\"data-current-route\", ctx.currentRoute);\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return StoreListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}